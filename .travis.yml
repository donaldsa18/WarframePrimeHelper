
language: python
jobs:
  include:
      - name: "Python 3.8-dev on Linux"
        python: "3.8-dev"
        before_install:
          - sudo apt-get update
          - sudo apt-get install tesseract-ocr libtesseract-dev libleptonica-dev pkg-config libdbus-1-3 libxkbcommon-x11-0
        services:
          - xvfb
      - name: "Python 3.8 on Linux"
        python: "3.8"
        before_install:
          - sudo apt-get update
          - sudo apt-get install tesseract-ocr libtesseract-dev libleptonica-dev pkg-config libdbus-1-3 libxkbcommon-x11-0
        services:
          - xvfb
      - name: "Python 3.7 on Linux"
        python: "3.7"
        before_install:
          - sudo apt-get update
          - sudo apt-get install tesseract-ocr libtesseract-dev libleptonica-dev pkg-config libdbus-1-3 libxkbcommon-x11-0
        services:
          - xvfb
      - name: "Python 3.6 on Linux"
        python: "3.6"
        before_install:
          - sudo apt-get update
          - sudo apt-get install tesseract-ocr libtesseract-dev libleptonica-dev pkg-config libdbus-1-3 libxkbcommon-x11-0
        services:
          - xvfb
      - name: "Python 3.5 on Linux"
        python: "3.5"
        before_install:
          - sudo apt-get update
          - sudo apt-get install tesseract-ocr libtesseract-dev libleptonica-dev pkg-config libdbus-1-3 libxkbcommon-x11-0
        services:
          - xvfb
      - name: "Python 3.7.4 on macOS"
        os: osx
        osx_image: xcode11.3
        language: shell
        before_install:
          - sudo brew install leptonica
          - sudo brew install tesseract
        env: PYTHON=3.7.4
      - name: "Python 3.7.0 on Windows"
        os: windows
        language: shell
        before_install:
          - choco install python --version 3.7.0
          - python -m pip install --upgrade pip
        env: PATH=/c/Python37:/c/Python37/Scripts:$PATH TESSDATA_PREFIX=$TRAVIS_BUILD_DIR/tesseract4win64-4.0-beta/
variables:
    QT_QPA_PLATFORM: "offscreen"
install:
  - pip3 install -r requirements.txt
script:
  - pytest -s
notifications:
  email: false